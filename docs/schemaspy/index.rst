# coding=utf-8

.. _`SchemaSpy chapter`:

SchemaSpy
=========

SchemaSpy_ is a simple reverse engineering tool that takes a SQL database
and generate diagrams of the database schema. This is a java program; it
runs on all platforms.

Features
--------

SchemaSpy_ reads a relational database and

* generates a XML file corresponding to the database schema
* detects a few kind of defaults in the database design

.. figure:: media/SchemaSpyDefaults.jpg
    :align: center

    Examples of defaults detected by SchemaSpy_

* generates a html site a la javadoc with clickable entity-relationship
  diagrams.

.. figure:: media/SchemaSpySchema.jpg
    :align: center

    Example of diagram generated by SchemaSpy_


Interoperability
----------------

SchemaSpy_ is particularly interesting because the reverse engineering process
generates a rather simple XML file so that other tools can be build by
consuming this file.

Installation
------------

To install SchemaSpy_:

* Download the SchemaSpy_ jar file |SchemaSpyJar|.
* Create the directory ``%SCRIBETOOLS%\SchemaSpy``.
* Move the schemaSpy_5.0.0.jar file to this directory.
* Add ``%SCRIBETOOLS%\SchemaSpy`` to the system PATH.
* Copy the files ``schemaspy.bat`` and ``schemaspy.sh`` into the directory

Launching SchemaSpy
-------------------
You can check if the installation (in a new shell) by trying the ``-dbhelp``
option::

    schemaspy -dbhelp

This command should display a rather long list of supported database types,
with the option to use to connect to the database in each case.

You need an access to a SQL database if you want to execute SchemaSpy.
The command line options are described in the documentation.


Documentation
-------------
The documentation is available on the web. It mostly describes the many
possible command line options of SchemaSpy_. There is also an example
of generated html, "`library example`_".


SchemaSpy and SQLite
--------------------
The SQLite driver delivered with SchemaSpy is not working. If you want to
use SQLite, a driver and a property file must be installed:

*   make sure that the driver have been installed (see the
    :ref:`SQLite Installation` section of :ref:`SQLite chapter`).
    This results in the driver ``%SCRIBETOOLS%\SQLite\sqlite-jdbc.jar``.
*   Copy the file ``sqlite.properties`` into the directory
    ``%SCRIBETOOLS%\SchemaSpy``.
*   Adjust the location of the driver in the ``sqlite.properties`` file.

To use a SQLite database file you will have to specify the path to
the property files with the `-t` option: For instance the following command
line generate the documentation of the database ``db.sqlite3``
in the ``docs\SchemaSpy`` directory::

    schemaspy -t %SCRIBETOOLS%/SchemaSpy/sqlite.properties -db db.sqlite3 -sso -o docs\SchemaSpy

.. ............................................................................

.. _SchemaSpy: http://schemaspy.sourceforge.net

.. |SchemaSpyJar| replace::
    (:download:`local <../../res/schemaspy/downloads/schemaSpy_5.0.0.jar>`,
    `web <http://sourceforge.net/projects/schemaspy/files/>`__)

.. _`library example` :  http://schemaspy.sourceforge.net/sample/
